<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>HIERARQUIA DE ROTA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
/* ================= VISUAL PRETO E BRANCO ================= */
body{background:#000;color:#f5f5f5;font-family:Arial;margin:0}
header{background:#000;border-bottom:1px solid #333;padding:15px;text-align:center;position:relative}
h1{margin:0;font-size:1.6rem}
.card{background:#0a0a0a;border:1px solid #333;border-radius:10px;padding:20px;margin-bottom:20px}
main{max-width:1500px;margin:auto;padding:20px}

button{padding:10px 16px;border-radius:6px;border:none;font-weight:bold;cursor:pointer;transition:all 0.3s}
.btn{background:#fff;color:#000}
.btn:hover{background:#e0e0e0}
.btn-danger{background:#444;color:#fff}
.btn-danger:hover{background:#555}
.btn-success{background:#666;color:#fff}
.btn-success:hover{background:#777}

input,select{background:#0f0f0f;color:#fff;border:1px solid #444;padding:10px;border-radius:6px;width:100%;margin-bottom:10px;box-sizing:border-box}
input:focus,select:focus{outline:none;border-color:#888}

table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{padding:12px;border-bottom:1px solid #333;text-align:left;font-size:14px}
th{background:#111}
tr:hover{background:#1a1a1a}

.badge{padding:6px 12px;border-radius:999px;font-weight:bold;border:1px solid #000;display:inline-block;min-width:150px;text-align:center}
.superior{background:#fff;color:#000;border:1px solid #aaa}
.intermediario{background:#fff;color:#000;border:1px solid #aaa}
.subalterno{background:#fff;color:#000;border:1px solid #aaa}
.especial{background:#fff;color:#000;border:1px solid #aaa}
.graduado{background:#fff;color:#000;border:1px solid #aaa}
.praca{background:#fff;color:#000;border:1px solid #aaa}

.hidden{display:none}

/* STATUS */
.ativo{color:#22c55e;font-weight:bold}
.ausente{color:#facc15;font-weight:bold}
.inativo{color:#ef4444;font-weight:bold}

.status-indicator{display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:5px}
.status-ativo{background:#22c55e}
.status-ausente{background:#facc15}
.status-inativo{background:#ef4444}

/* CATEGORIAS */
.categoria-header{background:#111;color:#fff;padding:10px 15px;margin-top:20px;border-left:4px solid #fff;font-weight:bold;font-size:1.2em}
.categoria-container{margin-bottom:30px}

/* FORM GRID */
.form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px;margin-bottom:20px}

/* TOTALS */
.totals-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-top:20px}
.total-card{background:#111;padding:15px;border-radius:8px;text-align:center}
.total-card h3{margin:0 0 10px 0;color:#aaa;font-size:14px}
.total-card .numero{font-size:32px;font-weight:bold;color:#fff}

/* LOGIN MODAL */
.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,0.8)}
.modal-content{background:#000;margin:15% auto;padding:30px;border-radius:10px;width:90%;max-width:400px;border:1px solid #333}
.modal h2{margin-top:0;color:#fff;text-align:center}
.close{color:#888;float:right;font-size:28px;font-weight:bold;cursor:pointer}
.close:hover{color:#fff}
</style>
</head>
<body>
<header>
<h1>üîí HIERARQUIA DE ROTA</h1>
<button id="loginBtn" class="btn">üîë Acesso Administrativo</button>
<button id="logoutBtn" class="btn-danger hidden">üö™ Sair</button>
</header>

<main>
<!-- TOTAL GERAL -->
<div class="card">
<h2>üìä RESUMO GERAL DO EFETIVO</h2>
<div class="totals-grid">
<div class="total-card">
<h3>Total Geral</h3>
<div class="numero" id="totalGeral">0</div>
</div>
<div class="total-card">
<h3>Oficiais Superiores</h3>
<div class="numero" id="totalSuperiores">0</div>
</div>
<div class="total-card">
<h3>Oficiais Intermedi√°rios</h3>
<div class="numero" id="totalIntermediarios">0</div>
</div>
<div class="total-card">
<h3>Oficiais Subalternos</h3>
<div class="numero" id="totalSubalternos">0</div>
</div>
<div class="total-card">
<h3>Pra√ßas</h3>
<div class="numero" id="totalPracas">0</div>
</div>
</div>
</div>

<!-- MODAL DE LOGIN -->
<div id="loginModal" class="modal">
<div class="modal-content">
<span class="close">&times;</span>
<h2>üîê ACESSO RESTRITO</h2>
<input type="password" id="senha" placeholder="Senha de administrador" autocomplete="off" />
<button class="btn" id="btnEntrar" style="width:100%">VERIFICAR CREDENCIAIS</button>
</div>
</div>

<!-- PAINEL ADMIN -->
<div id="adminPanel" class="card hidden">
<h2>üë• CONTROLE DE INTEGRANTES</h2>
<div class="form-grid">
<div><label>CPF</label><input id="cpf" placeholder="000.000.000-00" /></div>
<div><label>NOME COMPLETO *</label><input id="nome" placeholder="Nome completo" /></div>
<div><label>PATENTE *</label><select id="patente"></select></div>
<div><label>FUN√á√ÉO</label><input id="funcao" placeholder="Cargo/Fun√ß√£o" /></div>
<div><label>DATA DE ENTRADA</label><input type="date" id="entrada" /></div>
<div><label>SITUA√á√ÉO</label><select id="situacao">
<option value="ativo">ATIVO</option>
<option value="ausente">AUSENTE</option>
<option value="inativo">INATIVO</option>
</select></div>
</div>
<br>
<button class="btn" onclick="add()">‚úÖ ADICIONAR INTEGRANTE</button>
<button class="btn-success" onclick="exportarDados()" style="margin-left:10px">üì• EXPORTAR DADOS</button>
<button class="btn-danger" onclick="limparForm()" style="margin-left:10px">üóëÔ∏è LIMPAR FORMUL√ÅRIO</button>
</div>

<!-- CATEGORIA: OFICIAIS SUPERIORES -->
<div class="categoria-container">
<div class="categoria-header">OFICIAIS SUPERIORES</div>
<div class="card">
<table>
<thead>
<tr><th>#</th><th>CPF</th><th>NOME</th><th>PATENTE</th><th>FUN√á√ÉO</th><th>ENTRADA</th><th>SITUA√á√ÉO</th><th>A√á√ÉO</th></tr>
</thead>
<tbody id="lista-superiores"></tbody>
</table>
</div>
</div>

<!-- CATEGORIA: OFICIAIS INTERMEDI√ÅRIOS -->
<div class="categoria-container">
<div class="categoria-header">OFICIAIS INTERMEDI√ÅRIOS</div>
<div class="card">
<table>
<thead>
<tr><th>#</th><th>CPF</th><th>NOME</th><th>PATENTE</th><th>FUN√á√ÉO</th><th>ENTRADA</th><th>SITUA√á√ÉO</th><th>A√á√ÉO</th></tr>
</thead>
<tbody id="lista-intermediarios"></tbody>
</table>
</div>
</div>

<!-- CATEGORIA: OFICIAIS SUBALTERNOS -->
<div class="categoria-container">
<div class="categoria-header">OFICIAIS SUBALTERNOS</div>
<div class="card">
<table>
<thead>
<tr><th>#</th><th>CPF</th><th>NOME</th><th>PATENTE</th><th>FUN√á√ÉO</th><th>ENTRADA</th><th>SITUA√á√ÉO</th><th>A√á√ÉO</th></tr>
</thead>
<tbody id="lista-subalternos"></tbody>
</table>
</div>
</div>

<!-- CATEGORIA: PRA√áAS ESPECIAIS/GRADUADAS -->
<div class="categoria-container">
<div class="categoria-header">PRA√áAS ESPECIAIS/GRADUADAS</div>
<div class="card">
<table>
<thead>
<tr><th>#</th><th>CPF</th><th>NOME</th><th>PATENTE</th><th>FUN√á√ÉO</th><th>ENTRADA</th><th>SITUA√á√ÉO</th><th>A√á√ÉO</th></tr>
</thead>
<tbody id="lista-especiais"></tbody>
</table>
</div>
</div>

<!-- CATEGORIA: PRA√áAS -->
<div class="categoria-container">
<div class="categoria-header">PRA√áAS</div>
<div class="card">
<table>
<thead>
<tr><th>#</th><th>CPF</th><th>NOME</th><th>PATENTE</th><th>FUN√á√ÉO</th><th>ENTRADA</th><th>SITUA√á√ÉO</th><th>A√á√ÉO</th></tr>
</thead>
<tbody id="lista-pracas"></tbody>
</table>
</div>
</div>

<script>
const ADMIN_SENHA = 'R0TA@Adm#2025!';

const patentes = [
 {n:'TENENTE-CORONEL PM', o:1, c:'superior'},
 {n:'MAJOR PM', o:2, c:'superior'},
 {n:'CAPIT√ÉO PM', o:3, c:'intermediario'},
 {n:'1¬∫ TENENTE PM', o:4, c:'subalterno'},
 {n:'2¬∫ TENENTE PM', o:5, c:'subalterno'},
 {n:'ASPIRANTE PM', o:6, c:'especial'},
 {n:'SUBTENENTE PM', o:7, c:'graduado'},
 {n:'1¬∫ SARGENTO PM', o:8, c:'graduado'},
 {n:'2¬∫ SARGENTO PM', o:9, c:'graduado'},
 {n:'3¬∫ SARGENTO PM', o:10, c:'graduado'},
 {n:'CABO PM', o:11, c:'praca'},
 {n:'SOLDADO PM', o:12, c:'praca'}
];

let dados = JSON.parse(localStorage.getItem('hierarquia_rota')) || [];

function init(){
 const sel = document.getElementById('patente');
 sel.innerHTML = '<option value="">SELECIONE A PATENTE</option>';
 patentes.forEach(p => {
  const o = document.createElement('option');
  o.value = p.n;
  o.textContent = p.n;
  sel.appendChild(o);
 });
 
 // Configurar data atual
 const hoje = new Date().toISOString().split('T')[0];
 document.getElementById('entrada').value = hoje;
 
 // Event listeners
 document.getElementById('loginBtn').onclick = openLoginModal;
 document.getElementById('logoutBtn').onclick = logout;
 document.getElementById('btnEntrar').onclick = login;
 document.querySelector('.close').onclick = closeLoginModal;
 
 // Fechar modal ao clicar fora
 window.onclick = function(event) {
  if (event.target == document.getElementById('loginModal')) {
   closeLoginModal();
  }
 };
 
 // Enter no campo de senha
 document.getElementById('senha').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') login();
 });
 
 render();
}

function openLoginModal() {
 document.getElementById('loginModal').style.display = 'block';
 document.getElementById('senha').focus();
}

function closeLoginModal() {
 document.getElementById('loginModal').style.display = 'none';
 document.getElementById('senha').value = '';
}

function login() {
 const senha = document.getElementById('senha').value;
 if (senha === ADMIN_SENHA) {
  localStorage.setItem('logado', '1');
  document.getElementById('adminPanel').classList.remove('hidden');
  document.getElementById('loginBtn').classList.add('hidden');
  document.getElementById('logoutBtn').classList.remove('hidden');
  closeLoginModal();
  alert('ACESSO ADMINISTRATIVO CONCEDIDO');
 } else {
  alert('SENHA INCORRETA');
  document.getElementById('senha').value = '';
  document.getElementById('senha').focus();
 }
}

function logout() {
 if (confirm('SAIR DO MODO ADMINISTRATIVO?')) {
  localStorage.removeItem('logado');
  location.reload();
 }
}

function limparForm() {
 document.getElementById('cpf').value = '';
 document.getElementById('nome').value = '';
 document.getElementById('funcao').value = '';
 document.getElementById('entrada').value = new Date().toISOString().split('T')[0];
 document.getElementById('situacao').value = 'ativo';
 document.getElementById('patente').value = '';
 document.getElementById('nome').focus();
}

function add() {
 const cpf = document.getElementById('cpf').value.trim();
 const nome = document.getElementById('nome').value.trim();
 const pat = document.getElementById('patente').value;
 
 if (!nome || !pat) {
  alert('PREENCHA O NOME E A PATENTE');
  return;
 }
 
 const pObj = patentes.find(p => p.n === pat);
 dados.push({
  id: Date.now(),
  cpf: cpf || 'N√ÉO INFORMADO',
  nome: nome,
  patente: pat,
  funcao: document.getElementById('funcao').value.trim() || 'N√ÉO DEFINIDA',
  ordem: pObj.o,
  classe: pObj.c,
  entrada: document.getElementById('entrada').value,
  situacao: document.getElementById('situacao').value
 });
 
 localStorage.setItem('hierarquia_rota', JSON.stringify(dados));
 limparForm();
 render();
 alert(`${nome.toUpperCase()} CADASTRADO COMO ${pat}`);
}

function remover(i) {
 if (confirm('REMOVER ESTE INTEGRANTE?')) {
  dados.splice(i, 1);
  localStorage.setItem('hierarquia_rota', JSON.stringify(dados));
  render();
 }
}

function exportarDados() {
 if (dados.length === 0) {
  alert('N√ÉO H√Å DADOS PARA EXPORTAR');
  return;
 }
 
 const dadosExportar = {
  sistema: 'HIERARQUIA DE ROTA',
  data: new Date().toISOString(),
  total: dados.length,
  integrantes: dados.map(d => ({
   cpf: d.cpf,
   nome: d.nome,
   patente: d.patente,
   funcao: d.funcao,
   entrada: d.entrada,
   situacao: d.situacao,
   categoria: d.classe
  }))
 };
 
 const dataStr = JSON.stringify(dadosExportar, null, 2);
 const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
 const fileName = `hierarquia-rota-${new Date().toISOString().split('T')[0]}.json`;
 
 const link = document.createElement('a');
 link.setAttribute('href', dataUri);
 link.setAttribute('download', fileName);
 link.click();
 
 alert('DADOS EXPORTADOS COM SUCESSO');
}

function render() {
 dados.sort((a, b) => a.ordem - b.ordem);
 
 // Totais gerais
 document.getElementById('totalGeral').textContent = dados.length;
 
 // Contadores por categoria
 const contadores = {
  superior: 0,
  intermediario: 0,
  subalterno: 0,
  especial: 0,
  graduado: 0,
  praca: 0
 };
 
 dados.forEach(d => {
  if (contadores[d.classe] !== undefined) {
   contadores[d.classe]++;
  }
 });
 
 // Atualizar totais dos cards
 document.getElementById('totalSuperiores').textContent = contadores.superior;
 document.getElementById('totalIntermediarios').textContent = contadores.intermediario;
 document.getElementById('totalSubalternos').textContent = contadores.subalterno;
 document.getElementById('totalPracas').textContent = contadores.praca + contadores.graduado + contadores.especial;
 
 // Atualizar estat√≠sticas
 document.getElementById('stat-superior').textContent = contadores.superior;
 document.getElementById('stat-intermediario').textContent = contadores.intermediario;
 document.getElementById('stat-subalterno').textContent = contadores.subalterno;
 document.getElementById('stat-especial').textContent = contadores.especial;
 document.getElementById('stat-graduado').textContent = contadores.graduado;
 document.getElementById('stat-praca').textContent = contadores.praca;
 
 // Limpar tabelas
 const tabelas = {
  'superior': 'lista-superiores',
  'intermediario': 'lista-intermediarios',
  'subalterno': 'lista-subalternos',
  'especial': 'lista-especiais',
  'graduado': 'lista-especiais', // Mesma tabela que especiais
  'praca': 'lista-pracas'
 };
 
 Object.values(tabelas).forEach(id => {
  document.getElementById(id).innerHTML = '';
 });
 
 // Preencher tabelas por categoria
 dados.forEach((d, i) => {
  const statusClass = d.situacao === 'ativo' ? 'status-ativo' : d.situacao === 'ausente' ? 'status-ausente' : 'status-inativo';
  
  const row = `
   <tr>
    <td>${i+1}</td>
    <td>${d.cpf}</td>
    <td>${d.nome}</td>
    <td><span class="badge ${d.classe}">${d.patente}</span></td>
    <td>${d.funcao}</td>
    <td>${d.entrada || '-'}</td>
    <td class="${d.situacao}"><span class="status-indicator ${statusClass}"></span>${d.situacao.toUpperCase()}</td>
    <td>${localStorage.getItem('logado') ? `<button class="btn-danger" onclick="remover(${i})">X</button>` : 'üîí'}</td>
   </tr>
  `;
  
  const tabelaId = tabelas[d.classe];
  if (tabelaId) {
   document.getElementById(tabelaId).innerHTML += row;
  }
 });
 
 // Verificar login
 if (localStorage.getItem('logado')) {
  document.getElementById('adminPanel').classList.remove('hidden');
  document.getElementById('loginBtn').classList.add('hidden');
  document.getElementById('logoutBtn').classList.remove('hidden');
 }
}

// Inicializar
init();
</script>
</body>
</html>